<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Story Map</title>

  <link href="https://api.mapbox.com/mapbox-gl-js/v3.17.0/mapbox-gl.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div id="map"></div>

  <div id="webgl-fallback" hidden>
    <div class="webgl-fallback-box">
      <strong>This map requires WebGL</strong>
      <p>
        Your browser or device has WebGL disabled or unavailable.
        Please enable hardware acceleration, turn off strict privacy protections,
        or try a different browser (Chrome, Firefox, Safari).
      </p>
    </div>
  </div>  
  
  <div class="map-overlay">
    <div class="map-title">Our stories (2006-2025)</div>
    <div class="map-subtitle">
      Click clusters or scroll to zoom. Click on a point to access that story.
    </div>
    <div class="filter-block">
      <div class="filter-label">Filter by year:</div>

      <!-- Custom year picker (v2) -->
      <div class="yearpicker" id="yearPicker">
        <button type="button" class="yearpicker-btn" id="yearPickerBtn" aria-expanded="false">
          <span id="yearPickerLabel">All</span>
          <span class="yearpicker-caret" aria-hidden="true">â–¾</span>
        </button>

        <div class="yearpicker-panel" id="yearPickerPanel" hidden>
          <div class="yearpicker-list" id="yearPickerList" role="listbox" aria-label="Years"></div>
        </div>
      </div>

      <!-- Native select fallback (easy revert) -->
      <select id="yearFilter" class="filter-select" style="display:none;">
        <option value="all">All</option>
      </select>
    </div>
  </div>


  <!-- Mapbox must load BEFORE app.js -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.17.0/mapbox-gl.js"></script>
  <script src="./app.js"></script>
</body>
</html>
